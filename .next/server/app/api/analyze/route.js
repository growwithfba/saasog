"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze/route";
exports.ids = ["app/api/analyze/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fdavekeefe%2FDocuments%2FPythonScripts%2Fsaas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdavekeefe%2FDocuments%2FPythonScripts%2Fsaas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fdavekeefe%2FDocuments%2FPythonScripts%2Fsaas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdavekeefe%2FDocuments%2FPythonScripts%2Fsaas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_davekeefe_Documents_PythonScripts_saas_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/analyze/route.ts */ \"(rsc)/./src/app/api/analyze/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze/route\",\n        pathname: \"/api/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze/route\"\n    },\n    resolvedPagePath: \"/Users/davekeefe/Documents/PythonScripts/saas/src/app/api/analyze/route.ts\",\n    nextConfigOutput,\n    userland: _Users_davekeefe_Documents_PythonScripts_saas_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/analyze/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmRhdmVrZWVmZSUyRkRvY3VtZW50cyUyRlB5dGhvblNjcmlwdHMlMkZzYWFzJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmRhdmVrZWVmZSUyRkRvY3VtZW50cyUyRlB5dGhvblNjcmlwdHMlMkZzYWFzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzBCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2Fhcy8/MTFiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvZGF2ZWtlZWZlL0RvY3VtZW50cy9QeXRob25TY3JpcHRzL3NhYXMvc3JjL2FwcC9hcGkvYW5hbHl6ZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYW5hbHl6ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5emVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FuYWx5emUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvZGF2ZWtlZWZlL0RvY3VtZW50cy9QeXRob25TY3JpcHRzL3NhYXMvc3JjL2FwcC9hcGkvYW5hbHl6ZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hbmFseXplL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fdavekeefe%2FDocuments%2FPythonScripts%2Fsaas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdavekeefe%2FDocuments%2FPythonScripts%2Fsaas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analyze/helpers.ts":
/*!****************************************!*\
  !*** ./src/app/api/analyze/helpers.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSubmissionById: () => (/* binding */ getSubmissionById),\n/* harmony export */   getSubmissions: () => (/* binding */ getSubmissions),\n/* harmony export */   loadSubmissions: () => (/* binding */ loadSubmissions),\n/* harmony export */   saveSubmissions: () => (/* binding */ saveSubmissions)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n// In-memory storage for beta - but we'll back it up to cookies\nlet submissions = [];\n// Use cookies for persistent storage that works on both client and server\nconst loadSubmissions = ()=>{\n    try {\n        // Server-side: Use Next.js cookies API\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const savedSubmissions = cookieStore.get(\"savedSubmissions\");\n        if (savedSubmissions) {\n            try {\n                // Try to parse the cookie data\n                const cookieData = JSON.parse(decodeURIComponent(savedSubmissions.value));\n                // If the cookie has data and our in-memory cache is empty, use the cookie data\n                if (cookieData && Array.isArray(cookieData) && cookieData.length > 0 && submissions.length === 0) {\n                    submissions = cookieData;\n                    console.log(`Loaded ${submissions.length} submissions from cookies`);\n                }\n            } catch (e) {\n                console.error(\"Error parsing submissions from cookies:\", e);\n            }\n        }\n        // Return whatever we have (from memory or cookies)\n        return submissions;\n    } catch (error) {\n        console.error(\"Error loading saved submissions:\", error);\n        return submissions; // Return whatever we have in memory\n    }\n};\n// Store submissions in a cookie with a global scope\nconst saveSubmissions = (response, data)=>{\n    try {\n        if (data && data.length > 0) {\n            // Store in memory for this server instance\n            submissions = data;\n            // For the cookie, store only essential data (IDs and minimal metadata)\n            const minimalSubmissions = data.map((sub)=>({\n                    id: sub.id,\n                    title: sub.title,\n                    userId: sub.userId,\n                    createdAt: sub.createdAt,\n                    score: sub.score,\n                    status: sub.status\n                }));\n            // Only save up to 20 submissions in the cookie to avoid size limits\n            const limitedSubmissions = minimalSubmissions.slice(0, 20);\n            // Store minimal version in cookie\n            response.cookies.set({\n                name: \"savedSubmissions\",\n                value: encodeURIComponent(JSON.stringify(limitedSubmissions)),\n                path: \"/\",\n                maxAge: 60 * 60 * 24 * 7,\n                httpOnly: false,\n                sameSite: \"strict\"\n            });\n            // Also save IDs separately for easier lookup\n            const submissionIds = data.map((sub)=>sub.id);\n            response.cookies.set({\n                name: \"submissionIds\",\n                value: JSON.stringify(submissionIds.slice(0, 100)),\n                path: \"/\",\n                maxAge: 60 * 60 * 24 * 7,\n                httpOnly: false,\n                sameSite: \"strict\"\n            });\n            console.log(`Saved ${limitedSubmissions.length} submissions to cookie storage`);\n        }\n    } catch (error) {\n        console.error(\"Error saving submissions:\", error);\n    }\n    return response;\n};\n// Global in-memory map to store full submission details by ID\nconst submissionDetails = new Map();\n// Function to get submissions - make sure we always get the latest data\nconst getSubmissions = ()=>{\n    // Always try to load from storage first\n    return loadSubmissions();\n};\n// Get a specific submission by ID\nconst getSubmissionById = (id)=>{\n    // First check our detailed map\n    if (submissionDetails.has(id)) {\n        console.log(`Retrieved submission ${id} from detailed cache`);\n        return submissionDetails.get(id);\n    }\n    // If not found, load all submissions and find by ID\n    const allSubmissions = loadSubmissions();\n    const submission = allSubmissions.find((sub)=>sub.id === id);\n    if (submission) {\n        console.log(`Found submission ${id} in general submissions list`);\n        // If found, add to detail map for next time\n        submissionDetails.set(id, submission);\n    } else {\n        console.log(`Submission ${id} not found in any storage`);\n    }\n    return submission;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxvQkFBb0IsQ0FBQ3BCO0lBQ2hDLCtCQUErQjtJQUMvQixJQUFJaUIsa0JBQWtCSSxHQUFHLENBQUNyQixLQUFLO1FBQzdCVixRQUFRQyxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsRUFBRVMsR0FBRyxvQkFBb0IsQ0FBQztRQUM1RCxPQUFPaUIsa0JBQWtCcEMsR0FBRyxDQUFDbUI7SUFDL0I7SUFFQSxvREFBb0Q7SUFDcEQsTUFBTXNCLGlCQUFpQjVDO0lBQ3ZCLE1BQU02QyxhQUFhRCxlQUFlRSxJQUFJLENBQUN6QixDQUFBQSxNQUFPQSxJQUFJQyxFQUFFLEtBQUtBO0lBRXpELElBQUl1QixZQUFZO1FBQ2RqQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsRUFBRVMsR0FBRyw0QkFBNEIsQ0FBQztRQUVoRSw0Q0FBNEM7UUFDNUNpQixrQkFBa0JULEdBQUcsQ0FBQ1IsSUFBSXVCO0lBQzVCLE9BQU87UUFDTGpDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRVMsR0FBRyx5QkFBeUIsQ0FBQztJQUN6RDtJQUVBLE9BQU91QjtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYWFzLy4vc3JjL2FwcC9hcGkvYW5hbHl6ZS9oZWxwZXJzLnRzP2NhODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5cbi8vIEluLW1lbW9yeSBzdG9yYWdlIGZvciBiZXRhIC0gYnV0IHdlJ2xsIGJhY2sgaXQgdXAgdG8gY29va2llc1xubGV0IHN1Ym1pc3Npb25zOiBhbnlbXSA9IFtdO1xuXG4vLyBVc2UgY29va2llcyBmb3IgcGVyc2lzdGVudCBzdG9yYWdlIHRoYXQgd29ya3Mgb24gYm90aCBjbGllbnQgYW5kIHNlcnZlclxuZXhwb3J0IGNvbnN0IGxvYWRTdWJtaXNzaW9ucyA9ICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBTZXJ2ZXItc2lkZTogVXNlIE5leHQuanMgY29va2llcyBBUElcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGNvb2tpZXMoKTtcbiAgICBjb25zdCBzYXZlZFN1Ym1pc3Npb25zID0gY29va2llU3RvcmUuZ2V0KCdzYXZlZFN1Ym1pc3Npb25zJyk7XG4gICAgXG4gICAgaWYgKHNhdmVkU3VibWlzc2lvbnMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRyeSB0byBwYXJzZSB0aGUgY29va2llIGRhdGFcbiAgICAgICAgY29uc3QgY29va2llRGF0YSA9IEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHNhdmVkU3VibWlzc2lvbnMudmFsdWUpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIHRoZSBjb29raWUgaGFzIGRhdGEgYW5kIG91ciBpbi1tZW1vcnkgY2FjaGUgaXMgZW1wdHksIHVzZSB0aGUgY29va2llIGRhdGFcbiAgICAgICAgaWYgKGNvb2tpZURhdGEgJiYgQXJyYXkuaXNBcnJheShjb29raWVEYXRhKSAmJiBjb29raWVEYXRhLmxlbmd0aCA+IDAgJiYgc3VibWlzc2lvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgc3VibWlzc2lvbnMgPSBjb29raWVEYXRhO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBMb2FkZWQgJHtzdWJtaXNzaW9ucy5sZW5ndGh9IHN1Ym1pc3Npb25zIGZyb20gY29va2llc2ApO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgc3VibWlzc2lvbnMgZnJvbSBjb29raWVzOicsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gd2hhdGV2ZXIgd2UgaGF2ZSAoZnJvbSBtZW1vcnkgb3IgY29va2llcylcbiAgICByZXR1cm4gc3VibWlzc2lvbnM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBzYXZlZCBzdWJtaXNzaW9uczonLCBlcnJvcik7XG4gICAgcmV0dXJuIHN1Ym1pc3Npb25zOyAvLyBSZXR1cm4gd2hhdGV2ZXIgd2UgaGF2ZSBpbiBtZW1vcnlcbiAgfVxufTtcblxuLy8gU3RvcmUgc3VibWlzc2lvbnMgaW4gYSBjb29raWUgd2l0aCBhIGdsb2JhbCBzY29wZVxuZXhwb3J0IGNvbnN0IHNhdmVTdWJtaXNzaW9ucyA9IChyZXNwb25zZTogTmV4dFJlc3BvbnNlLCBkYXRhOiBhbnlbXSkgPT4ge1xuICB0cnkge1xuICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgLy8gU3RvcmUgaW4gbWVtb3J5IGZvciB0aGlzIHNlcnZlciBpbnN0YW5jZVxuICAgICAgc3VibWlzc2lvbnMgPSBkYXRhO1xuICAgICAgXG4gICAgICAvLyBGb3IgdGhlIGNvb2tpZSwgc3RvcmUgb25seSBlc3NlbnRpYWwgZGF0YSAoSURzIGFuZCBtaW5pbWFsIG1ldGFkYXRhKVxuICAgICAgY29uc3QgbWluaW1hbFN1Ym1pc3Npb25zID0gZGF0YS5tYXAoc3ViID0+ICh7XG4gICAgICAgIGlkOiBzdWIuaWQsXG4gICAgICAgIHRpdGxlOiBzdWIudGl0bGUsXG4gICAgICAgIHVzZXJJZDogc3ViLnVzZXJJZCxcbiAgICAgICAgY3JlYXRlZEF0OiBzdWIuY3JlYXRlZEF0LFxuICAgICAgICBzY29yZTogc3ViLnNjb3JlLFxuICAgICAgICBzdGF0dXM6IHN1Yi5zdGF0dXNcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgLy8gT25seSBzYXZlIHVwIHRvIDIwIHN1Ym1pc3Npb25zIGluIHRoZSBjb29raWUgdG8gYXZvaWQgc2l6ZSBsaW1pdHNcbiAgICAgIGNvbnN0IGxpbWl0ZWRTdWJtaXNzaW9ucyA9IG1pbmltYWxTdWJtaXNzaW9ucy5zbGljZSgwLCAyMCk7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIG1pbmltYWwgdmVyc2lvbiBpbiBjb29raWVcbiAgICAgIHJlc3BvbnNlLmNvb2tpZXMuc2V0KHtcbiAgICAgICAgbmFtZTogJ3NhdmVkU3VibWlzc2lvbnMnLFxuICAgICAgICB2YWx1ZTogZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGxpbWl0ZWRTdWJtaXNzaW9ucykpLFxuICAgICAgICBwYXRoOiAnLycsIC8vIEF2YWlsYWJsZSB0aHJvdWdob3V0IHRoZSBzaXRlXG4gICAgICAgIG1heEFnZTogNjAgKiA2MCAqIDI0ICogNywgLy8gMSB3ZWVrXG4gICAgICAgIGh0dHBPbmx5OiBmYWxzZSwgLy8gQWNjZXNzaWJsZSBmcm9tIEphdmFTY3JpcHRcbiAgICAgICAgc2FtZVNpdGU6ICdzdHJpY3QnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQWxzbyBzYXZlIElEcyBzZXBhcmF0ZWx5IGZvciBlYXNpZXIgbG9va3VwXG4gICAgICBjb25zdCBzdWJtaXNzaW9uSWRzID0gZGF0YS5tYXAoc3ViID0+IHN1Yi5pZCk7XG4gICAgICByZXNwb25zZS5jb29raWVzLnNldCh7XG4gICAgICAgIG5hbWU6ICdzdWJtaXNzaW9uSWRzJyxcbiAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHN1Ym1pc3Npb25JZHMuc2xpY2UoMCwgMTAwKSksIC8vIExpbWl0IHRvIDEwMCBJRHNcbiAgICAgICAgcGF0aDogJy8nLFxuICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcsIC8vIDEgd2Vla1xuICAgICAgICBodHRwT25seTogZmFsc2UsXG4gICAgICAgIHNhbWVTaXRlOiAnc3RyaWN0J1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBTYXZlZCAke2xpbWl0ZWRTdWJtaXNzaW9ucy5sZW5ndGh9IHN1Ym1pc3Npb25zIHRvIGNvb2tpZSBzdG9yYWdlYCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBzdWJtaXNzaW9uczonLCBlcnJvcik7XG4gIH1cbiAgXG4gIHJldHVybiByZXNwb25zZTtcbn07XG5cbi8vIEdsb2JhbCBpbi1tZW1vcnkgbWFwIHRvIHN0b3JlIGZ1bGwgc3VibWlzc2lvbiBkZXRhaWxzIGJ5IElEXG5jb25zdCBzdWJtaXNzaW9uRGV0YWlscyA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG5cbi8vIEZ1bmN0aW9uIHRvIGdldCBzdWJtaXNzaW9ucyAtIG1ha2Ugc3VyZSB3ZSBhbHdheXMgZ2V0IHRoZSBsYXRlc3QgZGF0YVxuZXhwb3J0IGNvbnN0IGdldFN1Ym1pc3Npb25zID0gKCkgPT4ge1xuICAvLyBBbHdheXMgdHJ5IHRvIGxvYWQgZnJvbSBzdG9yYWdlIGZpcnN0XG4gIHJldHVybiBsb2FkU3VibWlzc2lvbnMoKTtcbn07XG5cbi8vIEdldCBhIHNwZWNpZmljIHN1Ym1pc3Npb24gYnkgSURcbmV4cG9ydCBjb25zdCBnZXRTdWJtaXNzaW9uQnlJZCA9IChpZDogc3RyaW5nKSA9PiB7XG4gIC8vIEZpcnN0IGNoZWNrIG91ciBkZXRhaWxlZCBtYXBcbiAgaWYgKHN1Ym1pc3Npb25EZXRhaWxzLmhhcyhpZCkpIHtcbiAgICBjb25zb2xlLmxvZyhgUmV0cmlldmVkIHN1Ym1pc3Npb24gJHtpZH0gZnJvbSBkZXRhaWxlZCBjYWNoZWApO1xuICAgIHJldHVybiBzdWJtaXNzaW9uRGV0YWlscy5nZXQoaWQpO1xuICB9XG4gIFxuICAvLyBJZiBub3QgZm91bmQsIGxvYWQgYWxsIHN1Ym1pc3Npb25zIGFuZCBmaW5kIGJ5IElEXG4gIGNvbnN0IGFsbFN1Ym1pc3Npb25zID0gbG9hZFN1Ym1pc3Npb25zKCk7XG4gIGNvbnN0IHN1Ym1pc3Npb24gPSBhbGxTdWJtaXNzaW9ucy5maW5kKHN1YiA9PiBzdWIuaWQgPT09IGlkKTtcbiAgXG4gIGlmIChzdWJtaXNzaW9uKSB7XG4gICAgY29uc29sZS5sb2coYEZvdW5kIHN1Ym1pc3Npb24gJHtpZH0gaW4gZ2VuZXJhbCBzdWJtaXNzaW9ucyBsaXN0YCk7XG4gICAgXG4gICAgLy8gSWYgZm91bmQsIGFkZCB0byBkZXRhaWwgbWFwIGZvciBuZXh0IHRpbWVcbiAgICBzdWJtaXNzaW9uRGV0YWlscy5zZXQoaWQsIHN1Ym1pc3Npb24pO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKGBTdWJtaXNzaW9uICR7aWR9IG5vdCBmb3VuZCBpbiBhbnkgc3RvcmFnZWApO1xuICB9XG4gIFxuICByZXR1cm4gc3VibWlzc2lvbjtcbn07ICJdLCJuYW1lcyI6WyJjb29raWVzIiwic3VibWlzc2lvbnMiLCJsb2FkU3VibWlzc2lvbnMiLCJjb29raWVTdG9yZSIsInNhdmVkU3VibWlzc2lvbnMiLCJnZXQiLCJjb29raWVEYXRhIiwiSlNPTiIsInBhcnNlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwidmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwiZSIsImVycm9yIiwic2F2ZVN1Ym1pc3Npb25zIiwicmVzcG9uc2UiLCJkYXRhIiwibWluaW1hbFN1Ym1pc3Npb25zIiwibWFwIiwic3ViIiwiaWQiLCJ0aXRsZSIsInVzZXJJZCIsImNyZWF0ZWRBdCIsInNjb3JlIiwic3RhdHVzIiwibGltaXRlZFN1Ym1pc3Npb25zIiwic2xpY2UiLCJzZXQiLCJuYW1lIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic3RyaW5naWZ5IiwicGF0aCIsIm1heEFnZSIsImh0dHBPbmx5Iiwic2FtZVNpdGUiLCJzdWJtaXNzaW9uSWRzIiwic3VibWlzc2lvbkRldGFpbHMiLCJNYXAiLCJnZXRTdWJtaXNzaW9ucyIsImdldFN1Ym1pc3Npb25CeUlkIiwiaGFzIiwiYWxsU3VibWlzc2lvbnMiLCJzdWJtaXNzaW9uIiwiZmluZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze/helpers.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analyze/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/analyze/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers */ \"(rsc)/./src/app/api/analyze/helpers.ts\");\n\n\nasync function POST(request) {\n    try {\n        // Check if the request is a form (CSV file upload) or JSON (submission)\n        const contentType = request.headers.get(\"content-type\") || \"\";\n        if (contentType.includes(\"multipart/form-data\")) {\n            return handleCSVAnalysis(request);\n        } else {\n            return handleSubmission(request);\n        }\n    } catch (error) {\n        console.error(\"Error processing request:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to process request\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function handleCSVAnalysis(request) {\n    try {\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        if (!file) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No file uploaded\"\n            }, {\n                status: 400\n            });\n        }\n        const text = await file.text();\n        const lines = text.split(\"\\n\").slice(1); // Skip header row\n        // Process CSV data\n        const results = lines.filter((line)=>line.trim()) // Remove empty lines\n        .map((line)=>{\n            const columns = line.split(\",\");\n            return {\n                title: columns[0]?.trim() || \"\",\n                price: parseFloat(columns[8]?.trim() || \"0\"),\n                monthlySales: parseInt(columns[9]?.trim() || \"0\", 10),\n                monthlyRevenue: parseFloat(columns[9]?.trim() || \"0\"),\n                rating: parseFloat(columns[4]?.trim() || \"0\"),\n                reviews: parseInt(columns[5]?.trim() || \"0\", 10),\n                score: parseFloat(columns[6]?.trim() || \"0\"),\n                recommendation: \"Average\" // Default value\n            };\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(results);\n    } catch (error) {\n        console.error(\"Error processing CSV:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to process CSV file\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function handleSubmission(request) {\n    try {\n        const data = await request.json();\n        // Validate the submission data\n        if (!data.userId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"User ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!data.productData || !Array.isArray(data.productData.competitors) || data.productData.competitors.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Product data with competitors is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Use the ID provided from client if available, otherwise generate new one\n        const submissionId = data.id || `sub_${Date.now()}_${Math.random().toString(36).substring(2, 10)}`;\n        // Use the actual calculated score and status from marketScore object\n        const score = data.marketScore && typeof data.marketScore.score === \"number\" ? data.marketScore.score : typeof data.score === \"number\" ? data.score : 0;\n        const status = data.marketScore?.status || data.status || \"N/A\";\n        // Normalize the submission data\n        const submission = {\n            id: submissionId,\n            createdAt: data.createdAt || new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            score: score,\n            status: status,\n            userId: data.userId,\n            title: data.title || \"Untitled Analysis\",\n            productData: data.productData,\n            keepaResults: data.keepaResults || [],\n            marketScore: data.marketScore || {\n                score,\n                status\n            },\n            metrics: data.metrics || {\n                calculatedAt: new Date().toISOString()\n            },\n            marketInsights: data.marketInsights || \"\",\n            fromSaveCalculation: data.fromSaveCalculation || false,\n            fromUpload: data.fromUpload || false\n        };\n        // Load existing submissions\n        let submissions = (0,_helpers__WEBPACK_IMPORTED_MODULE_1__.loadSubmissions)();\n        // First check if this is a duplicate submission based on ID\n        const existingByIdIndex = submissions.findIndex((sub)=>sub.id === submissionId);\n        if (existingByIdIndex >= 0) {\n            // Update existing submission\n            submissions[existingByIdIndex] = submission;\n            console.log(`Updated existing submission with ID: ${submissionId}`);\n        } else {\n            // Check if this is likely a duplicate based on title and userId\n            // We only do this when NOT explicitly coming from the \"Save Calculation\" button\n            if (!data.fromSaveCalculation) {\n                const existingByTitleIndex = submissions.findIndex((sub)=>sub.userId === data.userId && sub.title === data.title && // Only consider it a duplicate if statuses match\n                    sub.status === status);\n                if (existingByTitleIndex >= 0) {\n                    // This is likely a duplicate, so update the existing record instead\n                    const existingId = submissions[existingByTitleIndex].id;\n                    // Preserve the original ID and creation date\n                    submission.id = existingId;\n                    submission.createdAt = submissions[existingByTitleIndex].createdAt;\n                    submissions[existingByTitleIndex] = submission;\n                    console.log(`Prevented duplicate: Updated submission with title \"${data.title}\" instead of creating new one`);\n                } else {\n                    // This is a new submission\n                    submissions.push(submission);\n                    console.log(`Added new submission with ID: ${submissionId}`);\n                }\n            } else {\n                // This is from the Save Calculation button, so add it as a new submission\n                submissions.push(submission);\n                console.log(`Added new submission from Save Calculation with ID: ${submissionId}`);\n            }\n        }\n        // Create a response with the cookie\n        const response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            submission,\n            message: \"Analysis saved successfully\"\n        });\n        // Add the submission data to the cookie\n        (0,_helpers__WEBPACK_IMPORTED_MODULE_1__.saveSubmissions)(response, submissions);\n        return response;\n    } catch (error) {\n        console.error(\"Error saving submission:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: error instanceof Error ? error.message : \"Failed to save submission\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const url = new URL(request.url);\n        const userId = url.searchParams.get(\"userId\");\n        if (!userId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"User ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Load all submissions to make sure we have the latest\n        const submissions = (0,_helpers__WEBPACK_IMPORTED_MODULE_1__.loadSubmissions)();\n        console.log(`Loaded ${submissions.length} total submissions`);\n        // Filter submissions by user ID\n        const userSubmissions = submissions.filter((sub)=>sub.userId === userId);\n        console.log(`Found ${userSubmissions.length} submissions for user ${userId}`);\n        // Sort submissions by creation date (newest first)\n        userSubmissions.sort((a, b)=>new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n        // Create response\n        const response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            submissions: userSubmissions\n        });\n        // Save current state to cookies too\n        (0,_helpers__WEBPACK_IMPORTED_MODULE_1__.saveSubmissions)(response, submissions);\n        return response;\n    } catch (error) {\n        console.error(\"Error fetching submissions:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to fetch submissions\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQWdCbkMsTUFBTSxDQUFDLHNCQUFzQixFQUFFTCxPQUFPLENBQUM7UUFFNUUsbURBQW1EO1FBQ25Ed0MsZ0JBQWdCQyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFDdkIsSUFBSW5DLEtBQUttQyxFQUFFM0IsU0FBUyxFQUFFNEIsT0FBTyxLQUFLLElBQUlwQyxLQUFLa0MsRUFBRTFCLFNBQVMsRUFBRTRCLE9BQU87UUFHakUsa0JBQWtCO1FBQ2xCLE1BQU1YLFdBQVd4RSxrRkFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQ2pDQyxTQUFTO1lBQ1RrRCxhQUFhZTtRQUNmO1FBRUEsb0NBQW9DO1FBQ3BDN0UseURBQWVBLENBQUNzRSxVQUFVUjtRQUUxQixPQUFPUTtJQUNULEVBQUUsT0FBTzdELE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBT1gsa0ZBQVlBLENBQUNhLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUSCxPQUFPO1FBQ1QsR0FBRztZQUFFSSxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3NhYXMvLi9zcmMvYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzPzA3ZGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGxvYWRTdWJtaXNzaW9ucywgc2F2ZVN1Ym1pc3Npb25zLCBnZXRTdWJtaXNzaW9uQnlJZCB9IGZyb20gJy4vaGVscGVycyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIHJlcXVlc3QgaXMgYSBmb3JtIChDU1YgZmlsZSB1cGxvYWQpIG9yIEpTT04gKHN1Ym1pc3Npb24pXG4gICAgY29uc3QgY29udGVudFR5cGUgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSB8fCAnJztcbiAgICBcbiAgICBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoJ211bHRpcGFydC9mb3JtLWRhdGEnKSkge1xuICAgICAgcmV0dXJuIGhhbmRsZUNTVkFuYWx5c2lzKHJlcXVlc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaGFuZGxlU3VibWlzc2lvbihyZXF1ZXN0KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyByZXF1ZXN0OicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byBwcm9jZXNzIHJlcXVlc3QnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNTVkFuYWx5c2lzKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKCk7XG4gICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpIGFzIEZpbGU7XG4gICAgXG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdObyBmaWxlIHVwbG9hZGVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IGZpbGUudGV4dCgpO1xuICAgIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJykuc2xpY2UoMSk7IC8vIFNraXAgaGVhZGVyIHJvd1xuICAgIFxuICAgIC8vIFByb2Nlc3MgQ1NWIGRhdGFcbiAgICBjb25zdCByZXN1bHRzID0gbGluZXNcbiAgICAgIC5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSkgLy8gUmVtb3ZlIGVtcHR5IGxpbmVzXG4gICAgICAubWFwKGxpbmUgPT4ge1xuICAgICAgICBjb25zdCBjb2x1bW5zID0gbGluZS5zcGxpdCgnLCcpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRpdGxlOiBjb2x1bW5zWzBdPy50cmltKCkgfHwgJycsXG4gICAgICAgICAgcHJpY2U6IHBhcnNlRmxvYXQoY29sdW1uc1s4XT8udHJpbSgpIHx8ICcwJyksXG4gICAgICAgICAgbW9udGhseVNhbGVzOiBwYXJzZUludChjb2x1bW5zWzldPy50cmltKCkgfHwgJzAnLCAxMCksXG4gICAgICAgICAgbW9udGhseVJldmVudWU6IHBhcnNlRmxvYXQoY29sdW1uc1s5XT8udHJpbSgpIHx8ICcwJyksXG4gICAgICAgICAgcmF0aW5nOiBwYXJzZUZsb2F0KGNvbHVtbnNbNF0/LnRyaW0oKSB8fCAnMCcpLFxuICAgICAgICAgIHJldmlld3M6IHBhcnNlSW50KGNvbHVtbnNbNV0/LnRyaW0oKSB8fCAnMCcsIDEwKSxcbiAgICAgICAgICBzY29yZTogcGFyc2VGbG9hdChjb2x1bW5zWzZdPy50cmltKCkgfHwgJzAnKSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbjogJ0F2ZXJhZ2UnIC8vIERlZmF1bHQgdmFsdWVcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdHMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgQ1NWOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHByb2Nlc3MgQ1NWIGZpbGUnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pc3Npb24ocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgdGhlIHN1Ym1pc3Npb24gZGF0YVxuICAgIGlmICghZGF0YS51c2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdVc2VyIElEIGlzIHJlcXVpcmVkJ1xuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCFkYXRhLnByb2R1Y3REYXRhIHx8ICFBcnJheS5pc0FycmF5KGRhdGEucHJvZHVjdERhdGEuY29tcGV0aXRvcnMpIHx8IGRhdGEucHJvZHVjdERhdGEuY29tcGV0aXRvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnUHJvZHVjdCBkYXRhIHdpdGggY29tcGV0aXRvcnMgaXMgcmVxdWlyZWQnXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBVc2UgdGhlIElEIHByb3ZpZGVkIGZyb20gY2xpZW50IGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGdlbmVyYXRlIG5ldyBvbmVcbiAgICBjb25zdCBzdWJtaXNzaW9uSWQgPSBkYXRhLmlkIHx8IGBzdWJfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMCl9YDtcbiAgICBcbiAgICAvLyBVc2UgdGhlIGFjdHVhbCBjYWxjdWxhdGVkIHNjb3JlIGFuZCBzdGF0dXMgZnJvbSBtYXJrZXRTY29yZSBvYmplY3RcbiAgICBjb25zdCBzY29yZSA9IGRhdGEubWFya2V0U2NvcmUgJiYgdHlwZW9mIGRhdGEubWFya2V0U2NvcmUuc2NvcmUgPT09ICdudW1iZXInIFxuICAgICAgPyBkYXRhLm1hcmtldFNjb3JlLnNjb3JlIFxuICAgICAgOiB0eXBlb2YgZGF0YS5zY29yZSA9PT0gJ251bWJlcicgXG4gICAgICAgICAgPyBkYXRhLnNjb3JlIFxuICAgICAgICAgIDogMDtcbiAgICBcbiAgICBjb25zdCBzdGF0dXMgPSBkYXRhLm1hcmtldFNjb3JlPy5zdGF0dXMgfHwgZGF0YS5zdGF0dXMgfHwgJ04vQSc7XG4gICAgXG4gICAgLy8gTm9ybWFsaXplIHRoZSBzdWJtaXNzaW9uIGRhdGFcbiAgICBjb25zdCBzdWJtaXNzaW9uID0ge1xuICAgICAgaWQ6IHN1Ym1pc3Npb25JZCxcbiAgICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBzY29yZTogc2NvcmUsXG4gICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXG4gICAgICB0aXRsZTogZGF0YS50aXRsZSB8fCAnVW50aXRsZWQgQW5hbHlzaXMnLFxuICAgICAgcHJvZHVjdERhdGE6IGRhdGEucHJvZHVjdERhdGEsXG4gICAgICBrZWVwYVJlc3VsdHM6IGRhdGEua2VlcGFSZXN1bHRzIHx8IFtdLFxuICAgICAgbWFya2V0U2NvcmU6IGRhdGEubWFya2V0U2NvcmUgfHwgeyBzY29yZSwgc3RhdHVzIH0sXG4gICAgICBtZXRyaWNzOiBkYXRhLm1ldHJpY3MgfHwge1xuICAgICAgICBjYWxjdWxhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSxcbiAgICAgIG1hcmtldEluc2lnaHRzOiBkYXRhLm1hcmtldEluc2lnaHRzIHx8ICcnLFxuICAgICAgZnJvbVNhdmVDYWxjdWxhdGlvbjogZGF0YS5mcm9tU2F2ZUNhbGN1bGF0aW9uIHx8IGZhbHNlLFxuICAgICAgZnJvbVVwbG9hZDogZGF0YS5mcm9tVXBsb2FkIHx8IGZhbHNlXG4gICAgfTtcbiAgICBcbiAgICAvLyBMb2FkIGV4aXN0aW5nIHN1Ym1pc3Npb25zXG4gICAgbGV0IHN1Ym1pc3Npb25zID0gbG9hZFN1Ym1pc3Npb25zKCk7XG4gICAgXG4gICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhIGR1cGxpY2F0ZSBzdWJtaXNzaW9uIGJhc2VkIG9uIElEXG4gICAgY29uc3QgZXhpc3RpbmdCeUlkSW5kZXggPSBzdWJtaXNzaW9ucy5maW5kSW5kZXgoc3ViID0+IHN1Yi5pZCA9PT0gc3VibWlzc2lvbklkKTtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdCeUlkSW5kZXggPj0gMCkge1xuICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHN1Ym1pc3Npb25cbiAgICAgIHN1Ym1pc3Npb25zW2V4aXN0aW5nQnlJZEluZGV4XSA9IHN1Ym1pc3Npb247XG4gICAgICBjb25zb2xlLmxvZyhgVXBkYXRlZCBleGlzdGluZyBzdWJtaXNzaW9uIHdpdGggSUQ6ICR7c3VibWlzc2lvbklkfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGxpa2VseSBhIGR1cGxpY2F0ZSBiYXNlZCBvbiB0aXRsZSBhbmQgdXNlcklkXG4gICAgICAvLyBXZSBvbmx5IGRvIHRoaXMgd2hlbiBOT1QgZXhwbGljaXRseSBjb21pbmcgZnJvbSB0aGUgXCJTYXZlIENhbGN1bGF0aW9uXCIgYnV0dG9uXG4gICAgICBpZiAoIWRhdGEuZnJvbVNhdmVDYWxjdWxhdGlvbikge1xuICAgICAgICBjb25zdCBleGlzdGluZ0J5VGl0bGVJbmRleCA9IHN1Ym1pc3Npb25zLmZpbmRJbmRleChzdWIgPT4gXG4gICAgICAgICAgc3ViLnVzZXJJZCA9PT0gZGF0YS51c2VySWQgJiYgXG4gICAgICAgICAgc3ViLnRpdGxlID09PSBkYXRhLnRpdGxlICYmXG4gICAgICAgICAgLy8gT25seSBjb25zaWRlciBpdCBhIGR1cGxpY2F0ZSBpZiBzdGF0dXNlcyBtYXRjaFxuICAgICAgICAgIHN1Yi5zdGF0dXMgPT09IHN0YXR1c1xuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGV4aXN0aW5nQnlUaXRsZUluZGV4ID49IDApIHtcbiAgICAgICAgICAvLyBUaGlzIGlzIGxpa2VseSBhIGR1cGxpY2F0ZSwgc28gdXBkYXRlIHRoZSBleGlzdGluZyByZWNvcmQgaW5zdGVhZFxuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSWQgPSBzdWJtaXNzaW9uc1tleGlzdGluZ0J5VGl0bGVJbmRleF0uaWQ7XG4gICAgICAgICAgLy8gUHJlc2VydmUgdGhlIG9yaWdpbmFsIElEIGFuZCBjcmVhdGlvbiBkYXRlXG4gICAgICAgICAgc3VibWlzc2lvbi5pZCA9IGV4aXN0aW5nSWQ7XG4gICAgICAgICAgc3VibWlzc2lvbi5jcmVhdGVkQXQgPSBzdWJtaXNzaW9uc1tleGlzdGluZ0J5VGl0bGVJbmRleF0uY3JlYXRlZEF0O1xuICAgICAgICAgIHN1Ym1pc3Npb25zW2V4aXN0aW5nQnlUaXRsZUluZGV4XSA9IHN1Ym1pc3Npb247XG4gICAgICAgICAgY29uc29sZS5sb2coYFByZXZlbnRlZCBkdXBsaWNhdGU6IFVwZGF0ZWQgc3VibWlzc2lvbiB3aXRoIHRpdGxlIFwiJHtkYXRhLnRpdGxlfVwiIGluc3RlYWQgb2YgY3JlYXRpbmcgbmV3IG9uZWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRoaXMgaXMgYSBuZXcgc3VibWlzc2lvblxuICAgICAgICAgIHN1Ym1pc3Npb25zLnB1c2goc3VibWlzc2lvbik7XG4gICAgICAgICAgY29uc29sZS5sb2coYEFkZGVkIG5ldyBzdWJtaXNzaW9uIHdpdGggSUQ6ICR7c3VibWlzc2lvbklkfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGlzIGlzIGZyb20gdGhlIFNhdmUgQ2FsY3VsYXRpb24gYnV0dG9uLCBzbyBhZGQgaXQgYXMgYSBuZXcgc3VibWlzc2lvblxuICAgICAgICBzdWJtaXNzaW9ucy5wdXNoKHN1Ym1pc3Npb24pO1xuICAgICAgICBjb25zb2xlLmxvZyhgQWRkZWQgbmV3IHN1Ym1pc3Npb24gZnJvbSBTYXZlIENhbGN1bGF0aW9uIHdpdGggSUQ6ICR7c3VibWlzc2lvbklkfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgYSByZXNwb25zZSB3aXRoIHRoZSBjb29raWVcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgIHN1Ym1pc3Npb24sXG4gICAgICBtZXNzYWdlOiAnQW5hbHlzaXMgc2F2ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEFkZCB0aGUgc3VibWlzc2lvbiBkYXRhIHRvIHRoZSBjb29raWVcbiAgICBzYXZlU3VibWlzc2lvbnMocmVzcG9uc2UsIHN1Ym1pc3Npb25zKTtcbiAgICBcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHN1Ym1pc3Npb246JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHNhdmUgc3VibWlzc2lvbicgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgdXNlcklkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3VzZXJJZCcpO1xuICAgIFxuICAgIGlmICghdXNlcklkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnVXNlciBJRCBpcyByZXF1aXJlZCcgXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBMb2FkIGFsbCBzdWJtaXNzaW9ucyB0byBtYWtlIHN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0XG4gICAgY29uc3Qgc3VibWlzc2lvbnMgPSBsb2FkU3VibWlzc2lvbnMoKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhgTG9hZGVkICR7c3VibWlzc2lvbnMubGVuZ3RofSB0b3RhbCBzdWJtaXNzaW9uc2ApO1xuICAgIFxuICAgIC8vIEZpbHRlciBzdWJtaXNzaW9ucyBieSB1c2VyIElEXG4gICAgY29uc3QgdXNlclN1Ym1pc3Npb25zID0gc3VibWlzc2lvbnMuZmlsdGVyKFxuICAgICAgc3ViID0+IHN1Yi51c2VySWQgPT09IHVzZXJJZFxuICAgICk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYEZvdW5kICR7dXNlclN1Ym1pc3Npb25zLmxlbmd0aH0gc3VibWlzc2lvbnMgZm9yIHVzZXIgJHt1c2VySWR9YCk7XG4gICAgXG4gICAgLy8gU29ydCBzdWJtaXNzaW9ucyBieSBjcmVhdGlvbiBkYXRlIChuZXdlc3QgZmlyc3QpXG4gICAgdXNlclN1Ym1pc3Npb25zLnNvcnQoKGEsIGIpID0+IFxuICAgICAgbmV3IERhdGUoYi5jcmVhdGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKClcbiAgICApO1xuICAgIFxuICAgIC8vIENyZWF0ZSByZXNwb25zZVxuICAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBzdWJtaXNzaW9uczogdXNlclN1Ym1pc3Npb25zIFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFNhdmUgY3VycmVudCBzdGF0ZSB0byBjb29raWVzIHRvb1xuICAgIHNhdmVTdWJtaXNzaW9ucyhyZXNwb25zZSwgc3VibWlzc2lvbnMpO1xuICAgIFxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzdWJtaXNzaW9uczonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHN1Ym1pc3Npb25zJyBcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJsb2FkU3VibWlzc2lvbnMiLCJzYXZlU3VibWlzc2lvbnMiLCJQT1NUIiwicmVxdWVzdCIsImNvbnRlbnRUeXBlIiwiaGVhZGVycyIsImdldCIsImluY2x1ZGVzIiwiaGFuZGxlQ1NWQW5hbHlzaXMiLCJoYW5kbGVTdWJtaXNzaW9uIiwiZXJyb3IiLCJjb25zb2xlIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJmb3JtRGF0YSIsImZpbGUiLCJ0ZXh0IiwibGluZXMiLCJzcGxpdCIsInNsaWNlIiwicmVzdWx0cyIsImZpbHRlciIsImxpbmUiLCJ0cmltIiwibWFwIiwiY29sdW1ucyIsInRpdGxlIiwicHJpY2UiLCJwYXJzZUZsb2F0IiwibW9udGhseVNhbGVzIiwicGFyc2VJbnQiLCJtb250aGx5UmV2ZW51ZSIsInJhdGluZyIsInJldmlld3MiLCJzY29yZSIsInJlY29tbWVuZGF0aW9uIiwiZGF0YSIsInVzZXJJZCIsInByb2R1Y3REYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwiY29tcGV0aXRvcnMiLCJsZW5ndGgiLCJzdWJtaXNzaW9uSWQiLCJpZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJtYXJrZXRTY29yZSIsInN1Ym1pc3Npb24iLCJjcmVhdGVkQXQiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRBdCIsImtlZXBhUmVzdWx0cyIsIm1ldHJpY3MiLCJjYWxjdWxhdGVkQXQiLCJtYXJrZXRJbnNpZ2h0cyIsImZyb21TYXZlQ2FsY3VsYXRpb24iLCJmcm9tVXBsb2FkIiwic3VibWlzc2lvbnMiLCJleGlzdGluZ0J5SWRJbmRleCIsImZpbmRJbmRleCIsInN1YiIsImxvZyIsImV4aXN0aW5nQnlUaXRsZUluZGV4IiwiZXhpc3RpbmdJZCIsInB1c2giLCJyZXNwb25zZSIsIm1lc3NhZ2UiLCJFcnJvciIsIkdFVCIsInVybCIsIlVSTCIsInNlYXJjaFBhcmFtcyIsInVzZXJTdWJtaXNzaW9ucyIsInNvcnQiLCJhIiwiYiIsImdldFRpbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fdavekeefe%2FDocuments%2FPythonScripts%2Fsaas%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fdavekeefe%2FDocuments%2FPythonScripts%2Fsaas&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();